<div align="center">
  <img src="Logo.png" alt="Monstra Logo" width="50%">
</div>

[![Swift](https://img.shields.io/badge/Swift-5.5-orange.svg)](https://swift.org)
[![Platform](https://img.shields.io/badge/platform-iOS%20%7C%20macOS%20%7C%20tvOS%20%7C%20watchOS-lightgrey.svg)](https://developer.apple.com)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Swift Package Manager](https://img.shields.io/badge/Swift%20Package%20Manager-compatible-brightgreen.svg)](https://github.com/apple/swift-package-manager)
[![CocoaPods](https://img.shields.io/badge/CocoaPods-compatible-brightgreen.svg)](https://cocoapods.org)
[![Docs](https://img.shields.io/badge/docs-API%20Reference-blue)](https://yangchenlarkin.github.io/Monstra/)

[English](README.md) | **ç®€ä½“ä¸­æ–‡**

ä¸€ä¸ªé«˜æ€§èƒ½çš„Swiftæ¡†æ¶ï¼Œæä¾›é«˜æ•ˆçš„ä»»åŠ¡æ‰§è¡Œã€å†…å­˜ç¼“å­˜å’Œæ•°æ®ç®¡ç†å®ç”¨å·¥å…·ï¼Œå…·æœ‰æ™ºèƒ½æ‰§è¡Œåˆå¹¶ã€TTLç¼“å­˜å’Œé‡è¯•é€»è¾‘åŠŸèƒ½ã€‚

æ–‡æ¡£ï¼š<a href="https://yangchenlarkin.github.io/Monstra/" target="_blank" rel="noopener noreferrer">APIå‚è€ƒæ–‡æ¡£ (Jazzy)</a>  

## ğŸš€ ç‰¹æ€§

### Monstore - ç¼“å­˜ç³»ç»Ÿ

#### MemoryCache
- **â° TTL & ä¼˜å…ˆçº§æ”¯æŒ**ï¼šå…ˆè¿›çš„ç”Ÿå­˜æ—¶é—´åŠŸèƒ½ï¼Œå…·æœ‰è‡ªåŠ¨è¿‡æœŸå’Œå¯é…ç½®çš„åŸºäºä¼˜å…ˆçº§çš„æ·˜æ±°ç­–ç•¥
- **ğŸ’¥ é›ªå´©ä¿æŠ¤**ï¼šæ™ºèƒ½TTLéšæœºåŒ–é˜²æ­¢ç¼“å­˜é›ªå´©å’ŒåŒæ—¶è¿‡æœŸçº§è”
- **ğŸ›¡ï¸ å‡»ç©¿ä¿æŠ¤**ï¼šå…¨é¢çš„ç©ºå€¼ç¼“å­˜å’Œå¼ºå¤§çš„é”®éªŒè¯ï¼Œå¢å¼ºå¯é æ€§d 
- **ğŸ“Š ç»Ÿè®¡ä¸ç›‘æ§**ï¼šå†…ç½®ç¼“å­˜ç»Ÿè®¡ã€æ€§èƒ½æŒ‡æ ‡å’Œå®æ—¶ç›‘æ§åŠŸèƒ½

### Monstask - ä»»åŠ¡æ‰§è¡Œæ¡†æ¶

#### **MonoTask**

- **ğŸ”„ æ‰§è¡Œåˆå¹¶**ï¼šå¤šä¸ªå¹¶å‘è¯·æ±‚åˆå¹¶ä¸ºå•æ¬¡æ‰§è¡Œ
- **â±ï¸ TTLç¼“å­˜**ï¼šç»“æœç¼“å­˜å¯é…ç½®æŒç»­æ—¶é—´ï¼Œè‡ªåŠ¨è¿‡æœŸ
- **ğŸ”„ é«˜çº§é‡è¯•é€»è¾‘**ï¼šæŒ‡æ•°é€€é¿ã€å›ºå®šé—´éš”å’Œæ··åˆé‡è¯•ç­–ç•¥
- **ğŸ¯ æ‰‹åŠ¨ç¼“å­˜æ§åˆ¶**ï¼šç»†ç²’åº¦ç¼“å­˜å¤±æ•ˆï¼Œå¸¦æœ‰æ‰§è¡Œç­–ç•¥é€‰é¡¹

#### **KVLightTasksManager**
- **ğŸ“ˆ å³°å€¼å‰Šå¹³**ï¼šé€šè¿‡åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦é˜²æ­¢è¿‡åº¦çš„ä»»åŠ¡æ‰§è¡Œé‡ï¼ˆLIFO/FIFOç­–ç•¥ï¼Œå¯é…ç½®é™åˆ¶ï¼‰
- **ğŸ”„ æ‰¹å¤„ç†**ï¼šæ”¯æŒå•ä¸ªå’Œæ‰¹é‡æ•°æ®æä¾›ï¼Œä»¥æé«˜åç«¯æ‰§è¡Œæ•ˆç‡
- **ğŸ“Š å¹¶å‘æ‰§è¡Œ**ï¼šå¯é…ç½®çš„å¹¶å‘ä»»åŠ¡é™åˆ¶ï¼ˆé»˜è®¤ï¼š4ä¸ªè¿è¡Œï¼Œ256ä¸ªæ’é˜Ÿï¼‰
- **ğŸ¯ æ‰§è¡Œåˆå¹¶**ï¼šæ™ºèƒ½è¯·æ±‚å»é‡å’Œåˆå¹¶ï¼Œé˜²æ­¢é‡å¤å·¥ä½œå¹¶ä¼˜åŒ–èµ„æºä½¿ç”¨
- **ğŸ’¾ ç»“æœç¼“å­˜**ï¼šé›†æˆMemoryCacheä»¥ä¼˜åŒ–æ€§èƒ½

#### **KVHeavyTasksManager**
- **ğŸ“Š è¿›åº¦è·Ÿè¸ª**ï¼šå®æ—¶è¿›åº¦æ›´æ–°ï¼Œå…·æœ‰è‡ªå®šä¹‰äº‹ä»¶å‘å¸ƒå’Œå¹¿æ’­åŠŸèƒ½
- **ğŸ¯ åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦**ï¼šé«˜çº§LIFO/FIFOç­–ç•¥ï¼Œæ”¯æŒæ™ºèƒ½ä¸­æ–­
- **ğŸ”„ ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šå®Œæ•´çš„å¯åŠ¨/åœæ­¢/æ¢å¤åŠŸèƒ½ï¼Œä¿æŒæä¾›è€…çŠ¶æ€
- **ğŸ“± å¹¶å‘æ§åˆ¶**ï¼šä¼˜åŒ–çš„å¹¶å‘æ‰§è¡Œé™åˆ¶ï¼ˆé»˜è®¤ï¼š2ä¸ªè¿è¡Œï¼Œ64ä¸ªæ’é˜Ÿï¼‰
- **ğŸ¯ æ‰§è¡Œåˆå¹¶**ï¼šæ™ºèƒ½è¯·æ±‚å»é‡å’Œåˆå¹¶ï¼Œé˜²æ­¢é‡å¤å·¥ä½œå¹¶ä¼˜åŒ–èµ„æºä½¿ç”¨
- **ğŸ’¾ ç»“æœç¼“å­˜**ï¼šé›†æˆMemoryCacheä»¥å¢å¼ºæ€§èƒ½å’Œæ•ˆç‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

#### Swift Package Managerï¼ˆæ¨èï¼‰

åœ¨ä½ çš„ `Package.swift` ä¸­æ·»åŠ Monstraï¼š

```swift
dependencies: [
    .package(url: "https://github.com/yangchenlarkin/Monstra.git", from: "0.1.0")
]
```

æˆ–ç›´æ¥åœ¨Xcodeä¸­æ·»åŠ ï¼š
1. File â†’ Add Package Dependencies
2. è¾“å…¥ä»“åº“URLï¼š`https://github.com/yangchenlarkin/Monstra.git`
3. é€‰æ‹©è¦ä½¿ç”¨çš„ç‰ˆæœ¬

#### CocoaPods

åœ¨ä½ çš„ `Podfile` ä¸­æ·»åŠ Monstraï¼š

```ruby
pod 'Monstra', '~> 0.1.0'
```

**æ³¨æ„**ï¼šMonstraä½œä¸ºç»Ÿä¸€æ¡†æ¶å‘å¸ƒï¼Œæ‰€ä»¥ä½ å¯ä»¥ä¸€æ¬¡è·å¾—æ‰€æœ‰ç»„ä»¶ã€‚

## ğŸ¯ ä½•æ—¶ä½¿ç”¨å„ä¸ªç»„ä»¶

| ç»„ä»¶ | æœ€ä½³ç”¨äº | å…³é”®ç‰¹æ€§ |
|-----------|----------|-------------|
| **MonoTask** | å•ä¸ªæ˜‚è´µæ“ä½œ | æ‰§è¡Œåˆå¹¶ã€TTLç¼“å­˜ã€é‡è¯•é€»è¾‘ |
| **KVLightTasksManager** | å¿«é€Ÿã€è½»é‡çº§æ“ä½œ | æ‰¹å¤„ç†ã€é”®éªŒè¯ã€é«˜ååé‡ |
| **KVHeavyTasksManager** | èµ„æºå¯†é›†å‹æ“ä½œ | è¿›åº¦è·Ÿè¸ªã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€é”™è¯¯æ¢å¤ |

#### **å„ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯**

- **MonoTask**ï¼šAPIè°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢ã€å—ç›Šäºç¼“å­˜å’Œå»é‡çš„æ˜‚è´µè®¡ç®—
- **KVLightTasksManager**ï¼šç”¨æˆ·èµ„æ–™è·å–ã€æœç´¢ç»“æœã€é…ç½®åŠ è½½ã€é«˜é¢‘æ“ä½œ
- **KVHeavyTasksManager**ï¼šæ–‡ä»¶ä¸‹è½½ã€è§†é¢‘å¤„ç†ã€MLæ¨ç†ã€å¸¦è¿›åº¦æ›´æ–°çš„é•¿æ—¶é—´è¿è¡Œæ“ä½œ

## ğŸ’¡ ç®€å•ç¤ºä¾‹

### 1. MemoryCache
åŸºæœ¬ç¼“å­˜æ“ä½œï¼Œå…·æœ‰TTLã€åŸºäºä¼˜å…ˆçº§å’ŒLRUæ·˜æ±°ã€‚

**ç®€å•ç¤ºä¾‹ï¼ˆé»˜è®¤é…ç½®ï¼‰ï¼š**
```swift
import Monstra

// ä½¿ç”¨é»˜è®¤é…ç½®åˆ›å»ºåŸºæœ¬ç¼“å­˜
let cache = MemoryCache<String, Int>()

// è®¾ç½®ä¸åŒä¼˜å…ˆçº§å’ŒTTLçš„å€¼
cache.set(element: 42, for: "answer", priority: 10.0, expiredIn: 3600.0) // 1å°æ—¶ï¼Œé«˜ä¼˜å…ˆçº§
cache.set(element: 100, for: "score", priority: 1.0) // é»˜è®¤TTLï¼Œä½ä¼˜å…ˆçº§
cache.set(element: nil, for: "user-999") // ç¼“å­˜ç©ºå€¼

// ä½¿ç”¨FetchResultæšä¸¾è·å–å€¼
switch cache.getElement(for: "answer") {
case .hitNonNullElement(let value):
    print("æ‰¾åˆ°ç­”æ¡ˆï¼š\(value)")
case .hitNullElement:
    print("æ‰¾åˆ°ç©ºå€¼")
case .miss:
    print("é”®æœªæ‰¾åˆ°æˆ–å·²è¿‡æœŸ")
case .invalidKey:
    print("æ— æ•ˆé”®")
}

// æ£€æŸ¥ç¼“å­˜çŠ¶æ€
print("ç¼“å­˜è®¡æ•°ï¼š\(cache.count)")
print("ç¼“å­˜å®¹é‡ï¼š\(cache.capacity)")
print("æ˜¯å¦ä¸ºç©ºï¼š\(cache.isEmpty)")
print("æ˜¯å¦å·²æ»¡ï¼š\(cache.isFull)")

// ç§»é™¤ç‰¹å®šå…ƒç´ 
let removed = cache.removeElement(for: "score")
print("å·²ç§»é™¤ï¼š\(removed ?? -1)")

// æ¸…ç†è¿‡æœŸå…ƒç´ 
cache.removeExpiredElements()
```

**è¯¦ç»†é…ç½®ç¤ºä¾‹ï¼š**
```swift
// æ‰€æœ‰é€‰é¡¹çš„é«˜çº§é…ç½®
let imageCache = MemoryCache<String, Data>(
    configuration: .init(
        // çº¿ç¨‹å®‰å…¨ï¼šä¸ºå¹¶å‘è®¿é—®å¯ç”¨DispatchSemaphoreåŒæ­¥
        enableThreadSynchronization: true,
        
        // å†…å­˜å’Œå®¹é‡é™åˆ¶ï¼šæœ€å¤š100é¡¹ï¼Œ50MBå†…å­˜ä½¿ç”¨
        memoryUsageLimitation: .init(
            capacity: 100,    // ç¼“å­˜é¡¹çš„æœ€å¤§æ•°é‡
            memory: 50        // æœ€å¤§å†…å­˜ä½¿ç”¨é‡ï¼ˆMBï¼‰
        ),
        
        // TTLè®¾ç½®ï¼šé¡¹ç›®åœ¨ç¼“å­˜ä¸­åœç•™çš„æ—¶é—´
        defaultTTL: 1800.0,              // å¸¸è§„å…ƒç´ 30åˆ†é’Ÿ
        defaultTTLForNullElement: 300.0, // ç©º/nilå…ƒç´ 5åˆ†é’Ÿ
        
        // ç¼“å­˜é›ªå´©é˜²æŠ¤ï¼šå°†TTLéšæœºåŒ–Â±30ç§’
        ttlRandomizationRange: 30.0,     // é˜²æ­¢æ‰€æœ‰é¡¹ç›®åŒæ—¶è¿‡æœŸ
        
        // é”®éªŒè¯ï¼šåªæ¥å—ä»¥"img_"å¼€å¤´çš„é”®
        keyValidator: { key in
            return key.hasPrefix("img_")  // è‡ªå®šä¹‰éªŒè¯é€»è¾‘
        },
        
        // å†…å­˜æˆæœ¬è®¡ç®—ï¼šä½¿ç”¨å®é™…æ•°æ®å¤§å°è¿›è¡Œæ·˜æ±°å†³ç­–
        costProvider: { data in
            return data.count             // è¿”å›å­—èŠ‚å¤§å°
        }
    )
)
```

### 2. MonoTask  
**å•ä»»åŠ¡æ‰§è¡Œä¸åˆå¹¶**ï¼šå¤„ç†å•ä¸ªä»»åŠ¡æ‰§è¡Œã€è¯·æ±‚åˆå¹¶å’Œç»“æœç¼“å­˜ï¼Œå¦‚æ¨¡å—åˆå§‹åŒ–ã€é…ç½®æ–‡ä»¶è¯»å–ã€APIè°ƒç”¨æ•´åˆå’Œç»“æœç¼“å­˜ï¼ˆä¾‹å¦‚ï¼šç”¨æˆ·èµ„æ–™ã€ç”µå•†è´­ç‰©è½¦æ“ä½œï¼‰

**ç®€å•ç¤ºä¾‹ï¼ˆé»˜è®¤é…ç½®ï¼‰ï¼š**
```swift
import Monstra

// ä½¿ç”¨æœ€å°é…ç½®åˆ›å»ºåŸºæœ¬ä»»åŠ¡
let networkTask = MonoTask<Data> { callback in
    // ä½ çš„ç½‘ç»œè¯·æ±‚é€»è¾‘åœ¨è¿™é‡Œ
    let url = URL(string: "https://api.example.com/data")!
    URLSession.shared.dataTask(with: url) { data, response, error in
        if let error = error {
            callback(.failure(error))
        } else if let data = data {
            callback(.success(data))
        }
    }.resume()
}

// æˆ–è€…ï¼Œä½ å¯ä»¥ä½¿ç”¨å¼‚æ­¥å—æ¥åˆ›å»ºMonoTask

// å¤šç§æ‰§è¡Œæ¨¡å¼ - åªæœ‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚
// æ³¨æ„ï¼šæ‰€æœ‰æ‰§è¡Œéƒ½å—ç›ŠäºMonoTaskçš„æ‰§è¡Œåˆå¹¶

// ä½¿ç”¨async/awaitæ‰§è¡Œ
let result1: Result<Data, Error> = await networkTask.asyncExecute()
switch result1 {
case .success(let data):
    print("è·å¾—æ•°æ®ï¼š\(data.count) å­—èŠ‚")
case .failure(let error):
    print("é”™è¯¯ï¼š\(error)")
}

// ä½¿ç”¨async/awaitå’Œtry/catchæ‰§è¡Œ
do {
    let result2: Data = try await networkTask.executeThrows() // ç¬¬äºŒæ¬¡æ‰§è¡Œï¼Œè¿”å›ç¼“å­˜ç»“æœ
    print("ç»“æœ2ï¼š\(result2)")
} catch {
    print("ç»“æœ2é”™è¯¯ï¼š\(error)")
}

// å³å‘å³å¿˜æ‰§è¡Œ
networkTask.justExecute()

// åŸºäºå›è°ƒçš„æ‰§è¡Œ
networkTask.execute { result in
    switch result {
    case .success(let data):
        print("ç»“æœ3ï¼ˆå›è°ƒï¼‰ï¼š\(data.count) å­—èŠ‚")
    case .failure(let error):
        print("ç»“æœ3ï¼ˆå›è°ƒï¼‰é”™è¯¯ï¼š\(error)")
    }
}
```

**è¯¦ç»†é…ç½®ç¤ºä¾‹ï¼š**
```swift
// è‡ªå®šä¹‰é‡è¯•å’Œé˜Ÿåˆ—è®¾ç½®çš„é«˜çº§é…ç½®
let fileProcessor1 = MonoTask<ProcessedData>(
    retry: 3,  // ç®€å•é‡è¯•è®¡æ•°é…ç½®
    
    // ç»“æœç¼“å­˜ï¼šä½¿ç”¨é»˜è®¤ç¼“å­˜é…ç½®
    resultExpireDuration: 300.0,      // 5åˆ†é’Ÿç¼“å­˜æŒç»­æ—¶é—´
    
    // ä»»åŠ¡é˜Ÿåˆ—ï¼šç”¨äºä»»åŠ¡æ‰§è¡Œçš„è‡ªå®šä¹‰æ´¾å‘é˜Ÿåˆ—
    taskQueue: DispatchQueue.global(qos: .utility),  // åå°ä¼˜å…ˆçº§é˜Ÿåˆ—
    
    // å›è°ƒé˜Ÿåˆ—ï¼šç”¨äºå›è°ƒçš„è‡ªå®šä¹‰æ´¾å‘é˜Ÿåˆ—
    callbackQueue: DispatchQueue.global(qos: .userInitiated)  // é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—
) { callback in
    // ä½ çš„æ–‡ä»¶å¤„ç†é€»è¾‘åœ¨è¿™é‡Œ
    let filePath = "/path/to/large/file.txt"
    do {
        let data = try Data(contentsOf: URL(fileURLWithPath: filePath))
        let processedData = ProcessedData(content: data, metadata: ["size": data.count])
        callback(.success(processedData))
    } catch {
        callback(.failure(error))
    }
}

// è‡ªå®šä¹‰é‡è¯•å’Œé˜Ÿåˆ—è®¾ç½®çš„é«˜çº§é…ç½®
let fileProcessor2 = MonoTask<ProcessedData>(
    // é‡è¯•ç­–ç•¥ï¼šå…·æœ‰3æ¬¡å°è¯•çš„æŒ‡æ•°é€€é¿
    retry: .count(
        count: 3,    // æœ€å¤§é‡è¯•æ¬¡æ•°
        intervalProxy: .exponentialBackoff(
            initialTimeInterval: 1.0,  // ä»1ç§’å»¶è¿Ÿå¼€å§‹
            scaleRate: 2.0             // æ¯æ¬¡é‡è¯•å»¶è¿Ÿç¿»å€
        )
    ),
    
    // ç»“æœç¼“å­˜ï¼šä½¿ç”¨é»˜è®¤ç¼“å­˜é…ç½®
    resultExpireDuration: 300.0,      // 5åˆ†é’Ÿç¼“å­˜æŒç»­æ—¶é—´
    
    // ä»»åŠ¡é˜Ÿåˆ—ï¼šç”¨äºä»»åŠ¡æ‰§è¡Œçš„è‡ªå®šä¹‰æ´¾å‘é˜Ÿåˆ—
    taskQueue: DispatchQueue.global(qos: .utility),  // åå°ä¼˜å…ˆçº§é˜Ÿåˆ—
    
    // å›è°ƒé˜Ÿåˆ—ï¼šç”¨äºå›è°ƒçš„è‡ªå®šä¹‰æ´¾å‘é˜Ÿåˆ—
    callbackQueue: DispatchQueue.global(qos: .userInitiated)  // é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—
) { callback in
    // ä½ çš„æ–‡ä»¶å¤„ç†é€»è¾‘åœ¨è¿™é‡Œ
    let filePath = "/path/to/large/file.txt"
    do {
        let data = try Data(contentsOf: URL(fileURLWithPath: filePath))
        let processedData = ProcessedData(content: data, metadata: ["size": data.count])
        callback(.success(processedData))
    } catch {
        callback(.failure(error))
    }
}
```

**å¼‚æ­¥ä»»åŠ¡å—ç¤ºä¾‹ï¼š**
```swift
// ä½¿ç”¨ç°ä»£Swiftå¹¶å‘çš„å¼‚æ­¥/ç­‰å¾…åˆå§‹åŒ–
let unzipTask = MonoTask<[String]>(
    // é‡è¯•ç­–ç•¥ï¼šæ–‡ä»¶æ“ä½œçš„å›ºå®šé—´éš”é‡è¯•
    retry: .count(
        count: 2,    // ä¸ºæ–‡ä»¶ç³»ç»Ÿé—®é¢˜é‡è¯•ä¸¤æ¬¡
        intervalProxy: .fixed(timeInterval: 1.0)  // é‡è¯•é—´ç­‰å¾…1ç§’
    ),
    
    // ç»“æœç¼“å­˜ï¼šç¼“å­˜è§£å‹æ–‡ä»¶åˆ—è¡¨10åˆ†é’Ÿ
    resultExpireDuration: 600.0,      // 10åˆ†é’Ÿç¼“å­˜æŒç»­æ—¶é—´
    
    // ä»»åŠ¡é˜Ÿåˆ—ï¼šæ–‡ä»¶æ“ä½œçš„åå°é˜Ÿåˆ—
    taskQueue: DispatchQueue.global(qos: .utility),
    
    // å›è°ƒé˜Ÿåˆ—ï¼šUIæ›´æ–°çš„ä¸»é˜Ÿåˆ—
    callbackQueue: DispatchQueue.main
) {
    // ç›´æ¥è¿”å›Resultçš„å¼‚æ­¥ä»»åŠ¡å—
    do {
        let archivePath = "/path/to/archive.zip"
        let extractPath = "/path/to/extract/"
        
        // æ¨¡æ‹Ÿå¼‚æ­¥è§£å‹æ“ä½œ
        let extractedFiles = try await unzipArchive(at: archivePath, to: extractPath)
        return .success(extractedFiles)
    } catch {
        return .failure(error)
    }
}

// ä½¿ç”¨async/await
let extractedFiles = try await unzipTask.executeThrows()
print("è§£å‹äº† \(extractedFiles.count) ä¸ªæ–‡ä»¶")
```

### 3. KVLightTasksManager
**å¤§å®¹é‡ä»»åŠ¡æ‰§è¡Œ**ï¼šå¤„ç†å…·æœ‰å³°å€¼å‰Šå¹³çš„å¤§å®¹é‡æ“ä½œï¼Œå¦‚å›¾ç‰‡ä¸‹è½½ã€æœ¬åœ°æ•°æ®åº“æ‰¹é‡è¯»å–ã€åœ°å›¾ç“¦ç‰‡ä¸‹è½½å’Œç¼“å­˜é¢„çƒ­æ“ä½œ

**ç®€å•ç¤ºä¾‹ï¼ˆé»˜è®¤é…ç½®ï¼‰ï¼š**
```swift
import Monstra

// åˆ›å»ºç”¨äºå¤„ç†å›¾ç‰‡ä¸‹è½½çš„è½»é‡çº§ä»»åŠ¡ç®¡ç†å™¨
let imageTaskManager = KVLightTasksManager<UIImage> { (imageURL: URL, completion: @escaping (Result<UIImage?, Error>) -> Void) in
    // ç®€å•çš„å›¾ç‰‡ä¸‹è½½ä»»åŠ¡
    URLSession.shared.dataTask(with: imageURL) { data, response, error in
        if let error = error {
            completion(.failure(error))
        } else if let data = data, let image = UIImage(data: data) {
            completion(.success(image))
        } else {
            completion(.failure(NSError(domain: "ImageError", code: -1, userInfo: nil)))
        }
    }.resume()
}

// è·å–å¤šä¸ªå›¾ç‰‡
let imageURLs = [
    "https://example.com/image1.jpg",
    "https://example.com/image2.jpg", 
    "https://example.com/image3.jpg"
].compactMap { URL(string: $0) }

// å•ç‹¬è·å–å›¾ç‰‡
for (index, url) in imageURLs.enumerated() {
    imageTaskManager.fetch(key: url) { key, result in
        switch result {
        case .success(let image):
            if let image = image {
                print("å›¾ç‰‡ \(index + 1) ä¸‹è½½æˆåŠŸï¼š\(image.size)")
            } else {
                print("å›¾ç‰‡ \(index + 1) è¿”å›nil")
            }
        case .failure(let error):
            print("å›¾ç‰‡ \(index + 1) å¤±è´¥ï¼š\(error)")
        }
    }
}

// ä¸€æ¬¡è·å–å¤šä¸ªå›¾ç‰‡ï¼Œä½¿ç”¨æ‰¹é‡å›è°ƒ
imageTaskManager.fetch(keys: imageURLs) { key, result in
    switch result {
    case .success(let image):
        if let image = image {
            print("å›¾ç‰‡å·²ä¸‹è½½ï¼š\(image.size)")
        } else {
            print("å›¾ç‰‡è¿”å›nil")
        }
    case .failure(let error):
        print("å›¾ç‰‡å¤±è´¥ï¼š\(error)")
    }
}
```

**æ‰¹å¤„ç†ç¤ºä¾‹ï¼š**
```swift
// åˆ›å»ºç”¨äºæ‰¹é‡è·å–ç”¨æˆ·èµ„æ–™æ•°æ®çš„ç®¡ç†å™¨
let userProfileManager = KVLightTasksManager<[String: UserProfile?]> { (userIDs: [String], completion: @escaping (Result<[String: UserProfile?], Error>) -> Void) in
    // æ¨¡æ‹Ÿæ‰¹é‡APIè°ƒç”¨æ¥è·å–å¤šä¸ªç”¨æˆ·èµ„æ–™
    DispatchQueue.global(qos: .utility).async {
        // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
        Thread.sleep(forTimeInterval: 0.1)
        
        var profiles: [String: UserProfile?] = [:]
        
        // æ¨¡æ‹Ÿæ‰¹é‡APIå“åº”
        for userID in userIDs {
            let profile = UserProfile(
                id: userID,
                name: "ç”¨æˆ· \(userID)",
                email: "user\(userID)@example.com",
                avatar: "https://example.com/avatars/\(userID).jpg"
            )
            profiles[userID] = profile
        }
        
        completion(.success(profiles))
    }
}

// åœ¨å•ä¸ªæ‰¹æ¬¡ä¸­è·å–å¤šä¸ªç”¨æˆ·èµ„æ–™
let userIDs = ["user1", "user2", "user3"]

// ä½¿ç”¨æ‰¹é‡å›è°ƒä¸€æ¬¡è·å–æ‰€æœ‰ç»“æœ
userProfileManager.fetch(keys: userIDs, multiCallback: { results in
    print("æ‰¹é‡åŠ è½½äº† \(results.count) ä¸ªç”¨æˆ·ï¼š")
    for (userID, result) in results {
        switch result {
        case .success(let profile):
            if let profile = profile {
                print("  âœ“ \(profile.name) (\(profile.email))")
            } else {
                print("  - \(userID)ï¼šæœªæ‰¾åˆ°èµ„æ–™")
            }
        case .failure(let error):
            print("  âœ— \(userID)ï¼š\(error)")
        }
    }
})

// ä¸ºæ¯ä¸ªç”¨æˆ·ä½¿ç”¨å•ç‹¬çš„å›è°ƒï¼ˆä»å—ç›Šäºæ‰¹å¤„ç†ï¼‰
userProfileManager.fetch(keys: userIDs) { userID, result in
    switch result {
    case .success(let profile):
        if let profile = profile {
            print("å•ç‹¬ï¼š\(profile.name) å·²åŠ è½½")
        } else {
            print("å•ç‹¬ï¼š\(userID) - æœªæ‰¾åˆ°èµ„æ–™")
        }
    case .failure(let error):
        print("å•ç‹¬ï¼š\(userID) - \(error)")
    }
}
```

**é«˜çº§é…ç½®ç¤ºä¾‹ï¼š**
```swift
// ä¸ºå›¾ç‰‡ä¸‹è½½åˆ›å»ºå…·æœ‰è‡ªå®šä¹‰é…ç½®çš„ç®¡ç†å™¨
let imageManager = KVLightTasksManager<UIImage>(
    config: .init(
        dataProvider: .multiprovide(maximumBatchCount: 4) { (imageURLs: [String], completion: @escaping (Result<[String: UIImage?], Error>) -> Void) in
            // å¹¶è¡Œä¸‹è½½å¤šä¸ªå›¾ç‰‡
            let group = DispatchGroup()
            var results = [String: UIImage?]()
            let lock = NSLock()
            
            for urlString in imageURLs {
                group.enter()
                
                guard let url = URL(string: urlString) else {
                    lock.lock()
                    results[urlString] = nil
                    lock.unlock()
                    group.leave()
                    continue
                }
                
                URLSession.shared.dataTask(with: url) { data, response, error in
                    defer { group.leave() }
                    
                    lock.lock()
                    if let data = data, let image = UIImage(data: data) {
                        results[urlString] = image
                    } else {
                        results[urlString] = nil
                    }
                    lock.unlock()
                }.resume()
            }
            
            group.notify(queue: .main) {
                completion(.success(results))
            }
        },
        maxNumberOfQueueingTasks: 32,     // é˜Ÿåˆ—æœ€å¤š32ä¸ªå›¾ç‰‡è¯·æ±‚
        maxNumberOfRunningTasks: 4,       // åŒæ—¶ä¸‹è½½4ä¸ªå›¾ç‰‡
        retryCount: 1,                    // å¤±è´¥çš„ä¸‹è½½é‡è¯•ä¸€æ¬¡
        PriorityStrategy: .FIFO,          // ä¼˜å…ˆå¤„ç†æœ€æ—©çš„è¯·æ±‚
        cacheConfig: .init(
            capacity: 100,                // ç¼“å­˜æœ€å¤š100ä¸ªå›¾ç‰‡
            memory: 50,                   // 50MBå†…å­˜é™åˆ¶
            defaultTTL: 3600.0,           // 1å°æ—¶ç¼“å­˜æŒç»­æ—¶é—´
            enableThreadSynchronization: true
        )
    )
)

// ä¸‹è½½å¤šä¸ªå›¾ç‰‡
let imageURLs = [
    "https://example.com/image1.jpg",
    "https://example.com/image2.jpg",
    "https://example.com/image3.jpg"
]

// ä¸‹è½½æ‰€æœ‰å›¾ç‰‡
imageManager.fetch(keys: imageURLs) { url, result in
    switch result {
    case .success(let image):
        if let image = image {
            print("âœ“ å·²ä¸‹è½½ï¼š\(image.size)")
        } else {
            print("- ä¸‹è½½å¤±è´¥ï¼š\(url)")
        }
    case .failure(let error):
        print("âœ— é”™è¯¯ï¼š\(error)")
    }
}
```

### 4. KVHeavyTasksManager

**èµ„æºå¯†é›†å‹æ“ä½œ**ï¼šå¤„ç†éœ€è¦å¤§é‡èµ„æºçš„ä»»åŠ¡ï¼Œå¦‚å¤§æ–‡ä»¶ä¸‹è½½ã€è§†é¢‘å¤„ç†å’ŒMLæ¨ç†ï¼Œå…·æœ‰å…¨é¢çš„è¿›åº¦è·Ÿè¸ª

#### SimpleDataProviderå®ç°

æ³¨æ„ï¼š
- `SimpleDataProvider` æ•…æ„ä¿æŒæœ€å°åŒ–ï¼ˆé˜»å¡I/Oï¼Œæ— è¿›åº¦/æ¢å¤ï¼‰ä»¥ä¾¿äºç†è§£ã€‚
- å¯¹äºå…·æœ‰è¿›åº¦/æ¢å¤/å–æ¶ˆçš„ç”Ÿäº§ä¸‹è½½ï¼Œè¯·æŸ¥çœ‹ `Examples/KVHeavyTasksManager/LargeFileDownloadManagement` ä¸­çš„é«˜çº§æä¾›è€…ã€‚

```swift
import Foundation
import Monstra

enum SimpleDataProviderEvent {
    case didStart
    case didFinish
}

/// ä»…ç”¨äºæ•™è‚²ç›®çš„çš„æœ€å°åŒæ­¥æä¾›è€…ã€‚
class SimpleDataProvider: Monstra.KVHeavyTaskBaseDataProvider<URL, Data, SimpleDataProviderEvent>, Monstra.KVHeavyTaskDataProviderInterface {
    let semaphore = DispatchSemaphore(value: 1)
    var isRunning = false {
        didSet { customEventPublisher(isRunning ? .didStart : .didFinish) }
    }

    func start() {
        semaphore.wait(); defer { semaphore.signal() }
        guard !isRunning else { return }
        isRunning = true

        DispatchQueue.global().async {
            let result: Result<Data?, Error>
            do {
                let data = try Data(contentsOf: self.key, options: .mappedIfSafe)
                result = .success(data)
            } catch {
                result = .failure(error)
            }

            self.semaphore.wait(); defer { self.semaphore.signal() }
            guard self.isRunning else { return }
            self.isRunning = false
            self.resultPublisher(result)
        }
    }

    @discardableResult
    func stop() -> KVHeavyTaskDataProviderStopAction {
        semaphore.wait(); defer { semaphore.signal() }
        guard isRunning else { return .dealloc }
        isRunning = false
        return .dealloc
    }
}
```

#### æœ€å°ä½¿ç”¨æ–¹æ³•

```swift
import Monstra

// åœ¨åå°é˜Ÿåˆ—ä¸Šæ‰§è¡Œé˜»å¡è¯»å–çš„æ•™è‚²æ€§æä¾›è€…
// å‚è§ï¼šExamples/KVHeavyTasksManager/LargeFileDownloadManagement/Sources/.../SimpleDataProvider.swift
typealias SimpleHeavyManager = KVHeavyTasksManager<URL, Data, SimpleDataProviderEvent, SimpleDataProvider>

let manager = SimpleHeavyManager(config: .init())
let fileURL = URL(string: "https://example.com/file.bin")!

// è§‚å¯Ÿç®€å•çš„å¼€å§‹/å®Œæˆäº‹ä»¶å¹¶è·å–ç»“æœ
manager.fetch(
    key: fileURL,
    customEventObserver: { event in
        switch event {
        case .didStart:  print("SimpleDataProviderï¼šå·²å¼€å§‹")
        case .didFinish: print("SimpleDataProviderï¼šå·²å®Œæˆ")
        }
    },
    result: { result in
        switch result {
        case .success(let data):
            print("å·²ä¸‹è½½ï¼š\(data.count) å­—èŠ‚")
        case .failure(let error):
            print("å¤±è´¥ï¼š\(error)")
        }
    }
)
```

## ğŸš€ é«˜çº§ç¤ºä¾‹

### **âš¡ MonoTask - ä»»åŠ¡æ‰§è¡Œåœºæ™¯**
<table width="100%">
  <colgroup>
    <col width="40%" />
    <col width="40%" />
    <col width="20%" />
  </colgroup>
  <thead>
    <tr>
      <th>åœºæ™¯</th>
      <th>æœ€ä½³å®è·µ</th>
      <th>ç¤ºä¾‹é“¾æ¥</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>æ¨¡å—åˆå§‹åŒ–</td>
      <td>ä½¿ç”¨é‡è¯•é€»è¾‘ç¼“å­˜åº”ç”¨é…ç½®</td>
      <td><a href="Examples/MonoTask/ModuleInitialization/README_CN.md">æ¨¡å—åˆå§‹åŒ–</a></td>
    </tr>
    <tr>
      <td>ç”¨æˆ·èµ„æ–™ç®¡ç†å™¨</td>
      <td>å¸¦ç¼“å­˜çš„å•å®ä¾‹ç”¨æˆ·èµ„æ–™ç®¡ç†</td>
      <td><a href="Examples/MonoTask/UserProfileManager/README_CN.md">ç”¨æˆ·èµ„æ–™ç®¡ç†å™¨</a></td>
    </tr>
  </tbody>
</table>

### **ğŸš€ KVLightTasksManager - è½»é‡çº§ä»»åŠ¡åœºæ™¯**
<table width="100%">
  <colgroup>
    <col width="40%" />
    <col width="40%" />
    <col width="20%" />
  </colgroup>
  <thead>
    <tr>
      <th>åœºæ™¯</th>
      <th>æœ€ä½³å®è·µ</th>
      <th>ç¤ºä¾‹é“¾æ¥</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>å¯¹è±¡è·å–ä»»åŠ¡</td>
      <td>æŒ‰IDåˆ—è¡¨æ‰¹é‡è·å–å¯¹è±¡ï¼Œæå‡æ€§èƒ½</td>
      <td><a href="Examples/KVLightTasksManager/ObjectFetchTask/README_CN.md">å¯¹è±¡è·å–ä»»åŠ¡</a></td>
    </tr>
  </tbody>
</table>

### **ğŸ—ï¸ KVHeavyTasksManager - é‡å‹ä»»åŠ¡åœºæ™¯**
<table width="100%">
  <colgroup>
    <col width="40%" />
    <col width="40%" />
    <col width="20%" />
  </colgroup>
  <thead>
    <tr>
      <th>åœºæ™¯</th>
      <th>æœ€ä½³å®è·µ</th>
      <th>ç¤ºä¾‹é“¾æ¥</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>å¤§æ–‡ä»¶ä¸‹è½½ç®¡ç†</td>
      <td>å¸¦è¿›åº¦è·Ÿè¸ªçš„å¤§æ–‡ä»¶ä¸‹è½½</td>
      <td><a href="Examples/KVHeavyTasksManager/LargeFileDownloadManagement/README_CN.md">å¤§æ–‡ä»¶ä¸‹è½½å™¨</a></td>
    </tr>
    <tr>
      <td>å¤§æ–‡ä»¶è§£å‹</td>
      <td>å¸¦è¿›åº¦è·Ÿè¸ªå’Œèµ„æºç®¡ç†çš„å¤§å‹å­˜æ¡£æ–‡ä»¶å¤„ç†</td>
      <td><a href="Examples/KVHeavyTasksManager/LargeFileUnzip/README_CN.md">å¤§æ–‡ä»¶è§£å‹</a></td>
    </tr>
  </tbody>
</table>

## ğŸ“‹ è¦æ±‚

### å¹³å°æ”¯æŒ
- **iOS**ï¼š13.0+
- **macOS**ï¼š10.15+
- **tvOS**ï¼š13.0+
- **watchOS**ï¼š6.0+

### Swiftç‰ˆæœ¬
- **Swift**ï¼š5.5+

### ä¾èµ–é¡¹
- **Foundation**ï¼šå†…ç½®ï¼ˆæ— å¤–éƒ¨ä¾èµ–ï¼‰
- **Alamofire**ï¼šä»…ç”¨äºç¤ºä¾‹å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ ¸å¿ƒåº“ä¸éœ€è¦ï¼‰

## ğŸ›¡ï¸ å…³é”®ä¼˜åŠ¿ä¸ä¿æŠ¤æœºåˆ¶

### **Monstoreä¿æŠ¤ç‰¹æ€§**

### **ç¼“å­˜é›ªå´©é˜²æŠ¤**
Monstraé€šè¿‡TTLéšæœºåŒ–é˜²æ­¢ç¼“å­˜é›ªå´©æ”»å‡»ã€‚å½“å¤šä¸ªç¼“å­˜æ¡ç›®åŒæ—¶è¿‡æœŸæ—¶ï¼Œå¯èƒ½å¯¼è‡´åç«¯è¯·æ±‚çªç„¶æ¿€å¢ã€‚Monstraåœ¨å¯é…ç½®èŒƒå›´å†…éšæœºåŒ–è¿‡æœŸæ—¶é—´ä»¥åˆ†æ•£è´Ÿè½½ã€‚

```swift
let cache = MemoryCache<String, Data>(
    configuration: .init(
        ttlRandomizationRange: 30.0 // Â±30ç§’éšæœºåŒ–
    )
)
```

### **é›ªå´©ä¿æŠ¤**
Monstraé€šè¿‡å®ç°æ™ºèƒ½æ·˜æ±°ç­–ç•¥æ¥é˜²æ­¢å†…å­˜é›ªå´©ã€‚å½“å†…å­˜ä½¿ç”¨æ¥è¿‘é™åˆ¶æ—¶ï¼Œç³»ç»Ÿä¼šæ ¹æ®ä¼˜å…ˆçº§ã€æœ€è¿‘æ€§å’Œè¿‡æœŸçŠ¶æ€è‡ªåŠ¨æ·˜æ±°ä»·å€¼æœ€ä½çš„æ¡ç›®ã€‚

```swift
let cache = MemoryCache<String, UIImage>(
    configuration: .init(
        memoryUsageLimitation: .init(
            capacity: 1000,    // æœ€å¤š1000ä¸ªå›¾ç‰‡
            memory: 500        // æœ€å¤š500MB
        )
    )
)
```

### **å‡»ç©¿ä¿æŠ¤**
Monstraé€šè¿‡åŸºäºä¼˜å…ˆçº§çš„LRUæ·˜æ±°é˜²æ­¢ç¼“å­˜å‡»ç©¿ã€‚å…·æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„å…³é”®æ•°æ®ä¿ç•™æ—¶é—´æ›´é•¿ï¼Œè€Œä¸å¤ªé‡è¦çš„æ•°æ®åœ¨è¾¾åˆ°å®¹é‡æ—¶é¦–å…ˆè¢«æ·˜æ±°ã€‚

```swift
// ä¸ºå…³é”®æ•°æ®è®¾ç½®é«˜ä¼˜å…ˆçº§
cache.set(element: userProfile, for: "user-123", priority: 10.0)

// ä¸ºä¸´æ—¶æ•°æ®è®¾ç½®ä½ä¼˜å…ˆçº§
cache.set(element: searchResults, for: "search-query", priority: 1.0)
```

### **ç©ºå…ƒç´ ç¼“å­˜**
Monstraæ”¯æŒä½¿ç”¨å•ç‹¬çš„TTLé…ç½®ç¼“å­˜ç©º/nilå…ƒç´ ï¼Œé˜²æ­¢å¯¹ä¸å­˜åœ¨æ•°æ®çš„é‡å¤æ•°æ®åº“æŸ¥è¯¢ã€‚

```swift
let cache = MemoryCache<String, User?>(
    configuration: .init(
        defaultTTL: 3600.0,           // å¸¸è§„æ•°æ®ï¼š1å°æ—¶
        defaultTTLForNullElement: 300.0  // ç©ºæ•°æ®ï¼š5åˆ†é’Ÿ
    )
)

// ç¼“å­˜å­˜åœ¨å’Œä¸å­˜åœ¨çš„ç”¨æˆ·
cache.set(element: user, for: "user-123")      // å¸¸è§„ç¼“å­˜
cache.set(element: nil, for: "user-999")      // ç©ºç¼“å­˜
```

### **Monstaskä¿æŠ¤ç‰¹æ€§**

#### **MonoTask - æ‰§è¡Œåˆå¹¶ä¸å»é‡**
MonoTaské€šè¿‡æ™ºèƒ½æ‰§è¡Œåˆå¹¶é˜²æ­¢é‡å¤å·¥ä½œã€‚å½“å¯¹åŒä¸€ä»»åŠ¡å‘å‡ºå¤šä¸ªå¹¶å‘è¯·æ±‚æ—¶ï¼Œåªå‘ç”Ÿä¸€æ¬¡æ‰§è¡Œï¼Œè€Œæ‰€æœ‰å›è°ƒéƒ½æ¥æ”¶ç›¸åŒçš„ç»“æœã€‚

```swift
let task = MonoTask<String>(resultExpireDuration: 60.0) { callback in
    // æ˜‚è´µçš„ç½‘ç»œè°ƒç”¨
    performExpensiveOperation(callback)
}

// å¤šä¸ªå¹¶å‘è°ƒç”¨ - åªæœ‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚
Task {
    let result1 = await task.asyncExecute() // å‘ç”Ÿç½‘ç»œè°ƒç”¨
    let result2 = await task.asyncExecute() // è¿”å›ç¼“å­˜ç»“æœ
    let result3 = await task.asyncExecute() // è¿”å›ç¼“å­˜ç»“æœ
}
```

#### **MonoTask - é«˜çº§é‡è¯•ç­–ç•¥**
MonoTaskæä¾›å¤æ‚çš„é‡è¯•æœºåˆ¶ï¼Œå…·æœ‰æŒ‡æ•°é€€é¿ã€å›ºå®šé—´éš”å’Œæ··åˆæ–¹æ³•ï¼Œä»¥ä¼˜é›…åœ°å¤„ç†ç¬æ—¶æ•…éšœã€‚

```swift
// å…·æœ‰3æ¬¡é‡è¯•çš„æŒ‡æ•°é€€é¿
let retryTask = MonoTask<Data>(
    retry: .count(
        count: 3, 
        intervalProxy: .exponentialBackoff(
            initialTimeInterval: 1.0, 
            scaleRate: 2.0
        )
    ),
    resultExpireDuration: 300.0
) { callback in
    performNetworkRequest(callback)
}

// å›ºå®šé—´éš”é‡è¯•
let fixedRetryTask = MonoTask<Data>(
    retry: .count(
        count: 5, 
        intervalProxy: .fixed(timeInterval: 2.0)
    )
) { callback in
    performDatabaseQuery(callback)
}
```

#### **MonoTask - æ‰§è¡ŒçŠ¶æ€ç®¡ç†**
MonoTaskæä¾›å¯¹ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œå…·æœ‰å–æ¶ˆã€é‡å¯å’Œå®Œæˆç­–ç•¥ã€‚

```swift
// ç«‹å³å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„æ‰§è¡Œ
task.clearResult(ongoingExecutionStrategy: .cancel)

// è®©æ‰§è¡Œå®Œæˆï¼Œç„¶åé‡å¯
task.clearResult(ongoingExecutionStrategy: .restart)

// è®©æ‰§è¡Œæ­£å¸¸å®Œæˆï¼Œåªæ˜¯æ¸…é™¤ç¼“å­˜
task.clearResult(ongoingExecutionStrategy: .allowCompletion)
```

#### **MonoTask - å¤šç§æ‰§è¡Œæ¨¡å¼**
MonoTaskæ”¯æŒå„ç§æ‰§è¡Œæ¨¡å¼ä»¥é€‚åº”ä¸åŒçš„ç”¨ä¾‹å’Œç¼–ç é£æ ¼ã€‚

```swift
// Async/awaitï¼ˆæ¨èç”¨äºç°ä»£Swiftï¼‰
let result = await task.asyncExecute()
switch result {
case .success(let data):
    updateUI(with: data)
case .failure(let error):
    showErrorMessage(error)
}

// åŸºäºå›è°ƒï¼ˆç”¨äºé—ç•™ä»£ç é›†æˆï¼‰
task.execute { result in
    switch result {
    case .success(let data):
        updateUI(with: data)
    case .failure(let error):
        showErrorMessage(error)
    }
}

// å³å‘å³å¿˜ï¼ˆç”¨äºé¢„çƒ­ç¼“å­˜ï¼‰
task.justExecute()
// ç¨åï¼Œè¿™å¯èƒ½ä¼šè¿”å›ç¼“å­˜çš„ç»“æœ
let result = await task.asyncExecute()
```

#### **ä»»åŠ¡ç®¡ç†å™¨ - åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦**
KVLightTasksManagerå’ŒKVHeavyTasksManageræä¾›å…·æœ‰LIFO/FIFOç­–ç•¥çš„åŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦ï¼Œä»¥å®ç°æœ€ä½³èµ„æºåˆ©ç”¨ç‡ã€‚

```swift
let lightManager = KVLightTasksManager<String, User>(
    config: .init(
        dataProvider: .asyncMonoprovide { key in
            try await API.fetchUser(id: key)
        },
        PriorityStrategy: .LIFO,  // æœ€æ–°è¯·æ±‚è·å¾—ä¼˜å…ˆçº§
        maxNumberOfRunningTasks: 4,
        maxNumberOfQueueingTasks: 256
    )
)

let heavyManager = KVHeavyTasksManager<String, Video>(
    config: .init(
        dataProvider: .asyncMonoprovide { key in
            try await VideoProcessor.process(key)
        },
        PriorityStrategy: .FIFO,  // å…¬å¹³å¤„ç†é¡ºåº
        maxNumberOfRunningTasks: 2,  // å¯¹é‡å‹æ“ä½œçš„é™åˆ¶
        maxNumberOfQueueingTasks: 64
    )
)
```

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯¦æƒ…è¯·æŸ¥çœ‹æˆ‘ä»¬çš„[è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚

### å¼€å‘æµç¨‹

1. Forkä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼ˆ`git checkout -b feature/amazing-feature`ï¼‰
3. è¿›è¡Œæ›´æ”¹
4. ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
5. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ`swift test`ï¼‰
6. è¿è¡Œä»£ç æ£€æŸ¥ï¼ˆ`swiftlint lint Sources/`ï¼‰
7. æäº¤æ›´æ”¹ï¼ˆ`git commit -m 'Add amazing feature'`ï¼‰
8. æ¨é€åˆ°åˆ†æ”¯ï¼ˆ`git push origin feature/amazing-feature`ï¼‰
9. æäº¤æ‹‰å–è¯·æ±‚

### ä»£ç é£æ ¼
- éµå¾ªSwift APIè®¾è®¡æŒ‡å—
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°åç§°
- æ·»åŠ å…¨é¢çš„æ–‡æ¡£æ³¨é‡Š
- ç¡®ä¿æ‰€æœ‰å…¬å…±APIéƒ½æœ‰å•å…ƒæµ‹è¯•
- ç»´æŠ¤æ€§èƒ½åŸºå‡†

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åœ¨MITè®¸å¯è¯ä¸‹è®¸å¯ - è¯¦æƒ…è¯·å‚è§[LICENSE](LICENSE)æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- å—é«˜æ€§èƒ½ç¼“å­˜å®ç°çš„å¯å‘
- ä½¿ç”¨Swiftä¼˜ç§€çš„ç±»å‹ç³»ç»Ÿå’Œæ€§èƒ½ç‰¹å¾æ„å»º
- ä¸ºç”Ÿäº§å°±ç»ªæ€§è¿›è¡Œäº†å¹¿æ³›æµ‹è¯•
- ç‰¹åˆ«æ„Ÿè°¢Swiftç¤¾åŒºçš„åé¦ˆå’Œè´¡çŒ®
- ç‰¹åˆ«æ„Ÿè°¢[Cursor](https://cursor.sh) - AIä¼˜å…ˆä»£ç ç¼–è¾‘å™¨ï¼Œæå‡å¼€å‘ç”Ÿäº§åŠ›

---

**ä¸ºSwiftç¤¾åŒºç”¨â¤ï¸åˆ¶ä½œ**
